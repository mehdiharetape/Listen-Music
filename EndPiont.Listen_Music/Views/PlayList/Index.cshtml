@addTagHelper *, LazZiya.TagHelpers
@using Listen_Music.Application.Services.Songs.Queries.GetSongsOfPlayList
@model SongForPlayListDTO_List

@{
    Layout = null;
    int pageNumber = 1;
    int pageSize = 12;
    int.TryParse(Context.Request.Query["pageNumber"], out pageNumber);
    int.TryParse(Context.Request.Query["pageSize"], out pageSize);
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category</title>
    <link href="~/SiteTemplate/asset/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/SiteTemplate/asset/css/bootstrap-rtl.min.css" rel="stylesheet" />
    <link href="~/SiteTemplate/asset/css/CategoryDetail.css" rel="stylesheet" />
    <link href="~/SiteTemplate/asset/font/css/font-awesome.min.css" rel="stylesheet" />
</head>
<body>

    <!-- header -->
    <header class="header-container">
        <nav id="menu-container">
            <ul class="menu-bar">
                <li class="items-menu"><a class="menu-link" href="~/Home/Index" title="صفحه اصلی"><i class="fa fa-home"></i> صفحه نخست</a></li>
                <li class="items-menu"><a class="menu-link" href="~/Contact/Index" title="تماس با ما"><i class="fa fa-envelope"></i> تماس با ما</a></li>
                <li class="items-menu"><a class="menu-link" href="~/About/Index" title="درباره ما"><i class="fa fa-info-circle"></i> درباره ما</a></li>
                @if (User.Identity.IsAuthenticated)
                {
                    <li class="items-menu">
                        <a id="username-button" href="#">@User.Identity.Name <i class="fa fa-caret-down"></i></a><br>
                        <div id="exit-prof-container">
                            <a id="exit-btn" class="exit-prof-btn" href="~/Authentication/SignOut">خروج از حساب</a>
                            <a id="profile-btn" class="exit-prof-btn" href="~/Follow/Index"> پروفایل من </a>
                        </div>
                    </li>
                }
                else
                {
                    <li class="items-menu">
                        <a class="menu-link" href="~/Authentication/SignIn" title="ورود">
                            ورود
                        </a>
                    </li>
                    <li class="items-menu">
                        <a class="menu-link" href="~/Authentication/SignUp" title="ثبت نام">
                            ثبت نام
                        </a>
                    </li>
                }

            </ul>
            <form  id="search-container" asp-action="Index" asp-controller="Home" method="get">
                <input type="text" name="SearchKey" id="serach-input" placeholder="جستجو : آهنگ ، خواننده"/>
                <button class="search-click" type="submit"><i class="fa fa-search search-icon"></i></button>
            </form>
            <div id="Cat-img">
                <h2 class="logo"><a href="~/Home/Index" title="Listen music"><i class="fa fa-headphones"></i> Listen Music</a></h2>
            </div>
        </nav>
        <div class="category-container">
            <div class="item-prodi" id="singer-btn">
                <pre>خواننده  <i class="fa fa-caret-down"></i></pre>
            </div>
            <div class="item-prodi" id="genre-btn">
                <pre>سبک  <i class="fa fa-caret-down"></i></pre>
            </div>
            <div class="item-prodi" id="playlist-btn">
                <pre>لیست پخش  <i class="fa fa-caret-down"></i></pre>
            </div>
        </div>

        <div id="singer-container">
            @*View Componenet*@
            @await Component.InvokeAsync("GetSingerMenuOtherPages")
        </div>
        <div id="genre-cotainer">
            @*View Component*@
            @await Component.InvokeAsync("GetGenreMenuOtherPages")
        </div>
        <div id="playlist-container">
            @*View component*@
            @await Component.InvokeAsync("GetPlayListOtherPages")
        </div>

    </header>
    <!-- end header -->
    <!-- main -->
    <main id="main">
        <article id="content-container">
            <section id="info-page">
                @if (Context.User.Identity.IsAuthenticated)
                {
                    <h4>@Model.PlayListName <a href="~/Follow/FollowPlayList?PlayListId=@Model.PlayListId" id="add-to-favorites"> + افزودن به علاقه مندی ها</a></h4>

                }
                else
                {
                    <h4>@Model.PlayListName <a href="" onclick="alert('وارد شوید یا ثبت نام کنید')" id="add-to-favorites"> + افزودن به علاقه مندی ها</a></h4>
                }
            </section>
            <section id="main-content">

                @foreach (var item in Model.Songs)
                {
                    <a class="song-items-container" href="~/Song/Index/@item.Id" title="جزئیات موزیک">
                        <div class="song-img">
                            <img src="~/@item.ImageSrc" alt="">
                        </div>
                        <div class="info-contaier">
                            <h3 class="singer-name">@item.ArtistName</h3>
                            <h4 class="song-name">@item.Title</h4>
                        </div>
                    </a>
                }

            </section>

            <div class="pagination">
                <paging total-records="@Model.TotalRow"
                        page-no="@pageNumber==0?1:pageNumber"
                        page-size="@pageSize==0?12:pageSize"
                        show-prev-next="true"
                        show-total-pages="false"
                        show-total-records="false"
                        show-page-size-nav="false"
                        show-first-numbered-page="true"
                        show-last-numbered-page="true"
                        query-string-key-page-no="Page"
                        query-string-key-page-size="PageSize"
                        query-string-value="@@(Request.QueryString.Value)"
                        gap-size="2">
                </paging>
            </div>
        </article>
    </main>
    <!-- end main -->
    <!-- footer -->
    <footer id="footer">
        <nav id="footer-container">

            <div class="grid-item item1" id="site-info-container">
                <h3>اطلاعات</h3>
                <a href="~/Contact/Index" title="contact us">تماس با ما</a>
                <a href="~/About/Index" title="about us">درباره ما</a>
            </div>

            <div class="grid-item item2" id="social-media-container">
                <h3>ما را دنبال کنید</h3><br>
                <a class="iconlink" href="#" title="telegram"><i class="fa fa-telegram icon-social"></i></a>
                <a class="iconlink" href="#" title="instagram"><i class="fa fa-instagram icon-social"></i></a>
                <a class="iconlink" href="#" title="twitter"><i class="fa fa-twitter icon-social"></i></a>
            </div>

            <div class="grid-item item3" id="email-container">
                <h4>ایمیل : <a href="#" title="e-mail">www.mehdigharetape97@gmail.com</a></h4>
            </div>

            <div class="grid-item item4" id="img-headphone">
                <img src="~/SiteTemplate/asset/css/image/head_1-removebg-preview.png" alt="">
            </div>

        </nav>
    </footer>
    <!-- end footer --------------------------------->
</body>
<script src="~/SiteTemplate/asset/js/CategoryDetail.js"></script>
</html>
